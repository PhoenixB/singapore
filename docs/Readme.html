<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>singapore - Readme</title>
<link rel="stylesheet" type="text/css" href="docstyle.css" />
</head>

<body>


<h1>singapore v0.9.8 - Readme</h1>

<ul>
  <li><a href="#release">Release notes</a></li>
  <li><a href="#history">Changes</a></li>
  <li><a href="#license">License information</a></li>
  <li><a href="#install">Installation</a></li>
  <li><a href="#managing">Gallery management</a></li>
  <li><a href="#iifn">Info in filename</a></li>
  <li><a href="#permissions">Help with file permissions</a></li>
  <li><a href="#override">Overriding settings</a></li>
  <li><a href="#history">Version history</a></li>
  <li><a href="Development.html">Developer documentation</a></li>
  <li><a href="Translation.html">Translating singapore</a></li>
</ul>


<h2><a name="license">Licensing information</a></h2>

<pre>
 /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\
 *  <a href="http://singapore.sourceforge.net/">singapore</a> - Copyright 2003 Tamlyn Rhodes &lt;<a href="mailto:tam@zenology.org">tam@zenology.org</a>&gt;        *
 *                                                                     *
 *  singapore is free software; you can redistribute it and/or modify  *
 *  it under the terms of the <a href="License.txt">GNU General Public License</a> as published  *
 *  by the Free Software Foundation; either version 2 of the License,  *
 *  or (at your option) any later version.                             *
 *                                                                     *
 *  singapore is distributed in the hope that it will be useful,       *
 *  but WITHOUT ANY WARRANTY; without even the implied warranty        *
 *  of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.            *
 *  See the GNU General Public License for more details.               *
 *                                                                     *
 *  You should have received a copy of the GNU General Public License  *
 *  along with this; if not, write to the Free Software Foundation,    *
 *  Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA      *
 \* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */
</pre>

<p>You are kindly requested to display a link such as the following on all 
pages generated by singapore:</p>

<p class="boxed">Powered by <a href="http://singapore.sourceforge.net/">singapore v0.9.8</a></p>


<h2><a name="release">Release notes</a></h2>

<p>Since nobody got back to me about the pre-release I'll assume it wasn't 
bug-riddled. So here's the Real Thing(tm). Apologies for the general lack of 
activity on this project lately. Hopefully will pick up again sometime soon...</p>

<p>Note that due to the change in the way gallery and image details are passed to 
the templates, any user-created templates will need to be updated. Look at the 
included default templates for the relevant code. There are also issues with 
translations. Some strings have changed and these changes should have been 
automatically merged back into the PO files by 'msgmerge' but they seem to have 
been merged in at odd places. This needs to be addressed by the translators.</p>


<h2><a name="install">Installation</a></h2>

<ol>
  <li>Extract all the files in the archive, conserving the directory hierarchy, 
  to a directory accessible by your web server.</li>

  <li>Run <code>test.php</code> to see if your server is capable of running 
  <strong>singapore</strong>.</li>
  
  <li>Set file permissions. The directories that need to be made writable are:
  <ul>
    <li><code>data/</code> and all subdirectories and files</li>
    <li><code>galleries/</code> and all subdirectories and files</li>
  </ul>
  <a href="#permissions">Help with file permissions</a>.
  </li>

  <li>Run <code>setup.php</code> to create the necessary directories.</li>
  
  <li>Delete <code>setup.php</code> to prevent any unauthorised users from 
  <a href="#uninstall">uninstalling</a> <strong>singapore</strong>.</li>

  <li>Log into the admin section and change the password. The username is 
  <code>admin</code> and the default password is <code>password</code>.<br />
  <span class="note">NOTE: a future release will allow multiple admin users with 
  different passwords.</span></li>
  
  <li>Add some galleries and images into the <code>galleries/</code> directory 
  <a href="#managing">More info</a>.</li>
</ol>

<p>Optional but recommended:</p>
<ul>
  
  <li>Have a browse through <code>singapore.ini</code> and look at the 
  available options. Each option has comments explaining its function. For most 
  purposes the default values will be fine but you may be able to tweak them 
  to your benefit. See also <a href="#override">overriding default 
  settings</a>.</li>
  
  <li>If your PHP installation uses GD version 2 or later or you have access to 
  <a href="http://www.imagemagick.org">ImageMagick</a> then you can get much 
  nicer generated thumbnails by changing the <code>thumbnail_software</code>
  option in <code>singapore.ini</code>.</li>
  
  <li>Make your own header image (<code>templates/default/images/header.gif</code>)
  with the name of your site.</li>
  
  <li>Edit the default style sheet (<code>templates/default/main.css</code>)  
  to integrate it with your site.</li>
  
  <li>Create your own template be editing the default one. There is currently no 
  documentation on this topic but anyone with a grasp of PHP should be able to 
  work it out.</li>
</ul>


<h2><a name="uninstall">Uninstallation</a></h2>

<p>Server generated content will be owned by the web server and it may therefore 
not be possible to delete these files via ftp. You can use the setdown function 
provided to remove the cache and logs. Use the admin interface to remove server 
generated galleries and images. Please run this script before removing any other 
files.</p>

<ul>
  <li><a href="../setup.php?setdown">Setdown</a> - CAUTION: this will delete all 
  your logs and cached thumbnails.</li>
</ul>


<h2><a name="managing">Managing your galleries</a></h2>

<p>If using the <a href="#iifn">info in file name</a> system then all management can be done 
directly on the files using, for example, an ftp client. To create new galleries
simply create a new subdirectory of <code>galleries/</code>. To add, move or delete 
images in a gallery simply add, move or delete the image files in the 
appropriate directory.</p>

<p>If you use the admin mode to edit your galleries or images it will 
automatically create the relevant metadata files. If these files are deleted  
<strong>singapore</strong> will revert to using <em>info in file name</em>.</p>

<p>Galleries may contain <em>either</em> images or further subgalleries. This 
means that if you create one or more subgalleries in a gallery that already 
contains images, these images will be 'hidden'. Removing these subgalleries will
make the images visible again.</p>
 
<p>There is currently no support for bulk image upload via the admin interface. You
are recommended to use FTP to upload your images and then use the admin mode to
add image information and for occasional additions and deletions.</p>


<h2><a name="iifn">Info in file name</a></h2>

<p>If <strong>singapore</strong> doesn't find a metadata file in a gallery it will try to 
extract some sensible information from the image file and directory names as 
follows:</p>

<p>Underscores (_) are converted to spaces and the file extension is discarded 
by removing all characters after the last . (dot) in the filename. If a filename or 
directory name contains the sequence '<code>_-_</code>' (underscore hyphen underscore) 
or '<code> - </code>' (space hyphen space) then the name will be split on this
separator. The first half will be interpreted as the artist name and the second 
half will be interpreted as the gallery or image name depending on context. If
a separator is not found then the file or directory name is interpreted as the
image or gallery name, respectively.</p>

<p>For example <code>Holiday_Snaps/Tamlyn_Rhodes_-_Pretty_picture_of_Sunset.jpg</code>
will be translated into an image called "Pretty picture of Sunset" by "Tamlyn 
Rhodes" in a gallery called "Holiday Snaps".</p>


<h2><a name="permissions">Help with file permissions</a></h2>

<p>How to make a file writable is dependent on your operating system and 
web server setup and can seem quite daunting for a beginner. One option that 
will work on nearly all Unix/Linux servers is to chmod the relevant 
files/directories to 777 (consult your FTP software documentation for help on 
using the chmod command). However this option is not considered very secure as 
anyone who has write access the web server (such as the owners of other web 
sites hosted on the same computer) can potentially write to or delete these 
directories. There may be a better way to make your files writable by your 
server but this is something you must take up with your server administrator.</p>

<p>One thing you can do to moderately increase security is: once you have changed 
your <strong>singapore</strong> admin password, chmod the adminusers.csv file back to 755.</p>


<h2><a name="override">Overriding settings</a></h2>

<p>All configuration options may be overridden on a per-gallery and/or 
per-template basis. This means that a particular gallery may use, for example, 
a different template or language to the rest of the site. Also, templates may 
introduce their own configuration settings if they so wish.</p>

<p>Gallery config options are stored in files named <code>gallery.ini</code> in 
the chosen gallery directory. Settings are not inherited by subgalleries; they 
affect only the current gallery and its images.</p>

<p>Template config options are stored in files named <code>template.ini</code> 
in the chosen template directory. Some of these settings are not present in the 
default config file; they are only found in the template config file.</p>

<p>Settings are loaded in this order: default settings (<code>singapore.ini</code>)
&gt; gallery settings (<code>gallery.ini</code>) &gt; template settings 
(<code>template.ini</code>). This may be changed in the future to allow gallery 
settings to override template settings.</p>

<p>Note that there is no restriction on which options may be overridden. 
Overriding some settings may lead to unpredictable operation (e.g. changing 
<code>pathto_galleries</code> in <code>gallery.ini</code>).</p>


<h2><a name="history">Version history</a></h2>

<p> Key to symbols:<br />
+ added<br />
- removed<br />
* fixed<br />
o changed
</p>

<h3>0.9.8 - </h3>

<p>
* use htmlspecialchars instead of htmlentities<br />
</p>

<h3>0.9.7 - 2003-11-17</h3>

<p>
+ added forced image resizing to fixed size<br />
+ added rudimentary image and gallery sort ordering<br />
* fixed multi-page galleries listings<br />
* fixed zero-width thumbnails for failed uploads<br />
+ added a few functions useful for templates<br />
+ added .jpe extension<br />
o changed details array format<br />
+ added basePath parameter to allow removed instantiation of singapore class<br />
o fixed some untranslated strings in admin mode<br />
* maybe fixed using special chars in filenames when magic_quotes_gpc is on<br />
+ added back-reference check to prevent file-system walking<br />
o merged __g functionality into _g and _ng
</p>

<h3>0.9.6 - 2003-08-15</h3>

<p>
o code entirely reorganised and largely re-written into classes<br />
+ multilanguage (i18n) support<br />
o interface is template driven<br />
+ per-gallery and per-template configuration files<br />
+ nested gallery support (unlimited depth)<br />
+ crumb line for easier navigation<br />
* all image and gallery names are now urlencoded<br />
+ many new config options<br />
</p>

<h3>0.9.5 - 2003-05-31</h3>

<p>
* fixed GD2 support in thumb.php (0.9.4a always used GD1)<br />
- removed secret string option<br />
+ added config options for admin session name (allows multiple installs on same server), 
  path to convert (ImageMagick), remove jpeg profile (ImageMagick), 
  character encoding &amp; site name (page title)<br />
o execution_timer off by default and default galleries per page set to 10<br />
+ thumb.php always uses fopen on remote files (now works on windows)<br />
+ more checks in test.php including ImageMagick support and bugfix #743954 (upload_tmp_dir)
</p>

<h3>0.9.4a - 2003-05-16</h3>

<p>
+ added PNG and GIF support under GD (GIF only with compatible versions of GD)<br />
+ added PNG, GIF, TIFF, BMP, and support from pretty much every 
  other file type under ImageMagick<br />
+ more checks in test.php<br />
* fixed image counting in iifn mode<br />
* fixed show_image_name_in_thumbnail_view<br />
+ images link back to correct page of gallery (second link)<br />
</p>

<h3>0.9.4 - 2003-05-13</h3>

<p>
o changed config to ini file + global config object<br />
o changed directory structure (moved documentation into docs/, moved writable files into data/)<br />
+ gallery (thumbnail) view shows more information<br />
+ gallery (thumbnail) view can show image name under thumbnail (off by default)<br />
+ gallery (list) view shows number of images in gallery<br />
+ implemented random thumbnail image in gallery (list) view<br />
+ added test.php and setup.php (not very useful yet)<br />
* fixed handling of gallery_thumb_number config option<br />
* password change bug<br />
* remote file thumbnail generation with ImageMagick<br />
</p>

<h3>0.9.3 - 2003-05-10</h3>

<p>
+ web admin can add and delete images and galleries<br />
+ added GD 2 and ImageMagic thumbnail generation support<br />
* does not generate any E_NOTICE errors anymore<br />
+ added config option for generated thumbnail JPEG quality<br />
* handles extended characters in gallery and image names (Piotr)<br />
* fixed 'images link back to correct page of gallery'<br />
+ added directory_mode and file_mode options<br />
* track_views and show_views now work independently<br />
o admin bar now visible everywhere when logged in<br />
</p>

<h3>0.9.2 - 2003-04-27</h3>

<p>
* fixed non-expiration of admin sessions in some cases<br />
+ added purge cached thumbnails option<br />
+ new 'XP' theme<br />
* fixed hit logging functions<br />
+ added image hit log viewing in admin mode<br />
+ images link back to correct page of gallery<br />
o optimised config.php<br />
* fixed some css issues<br />
</p>

<h3>0.9.1 - 2003-04-23</h3>

<p>
o changed database format<br />
+ added visible database fields for artist email, darkroom manipulation and
  digital manipulation<br />
+ added invisible (control) database fields for thumbnail, owner, groups and categories<br />
o put header and footer code into separate files<br />
+ implemented limited themeing support<br />
+ added config options for custom paths to cache, galleries, logs, themes, 
  header, footer and custom css<br />
o improved navigation in admin mode<br />
+ added optional script execution timer<br />
* fixed proliferation of newlines in 'desc' field<br />
* fixed wrongly escaped characters when saving info<br />
</p>

<h3>0.9a - 2003-04-13</h3>

<p>
+ added much better documentation
</p>

<h3>0.9 - 2003-03-30</h3>

<p>
+ admin section (allows editing image and gallery info)<br />
+ nicer gallery list layout<br />
+ filename parser for if no metadata file found<br />
o split into separate include files for io operations, ui generation etc<br />
* fixed some css issues<br />
+ lots of other little things
</p>

<h3>0.0 (unnumbered version) - 2003-03-29</h3>

<p>
o first release under GPL<br />
+ everything
</p>

<p><em>$Date: 2003/11/24 01:29:52 $</em></p>

</body>
</html>
