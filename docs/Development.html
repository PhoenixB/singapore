<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>singapore - Development</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="stylesheet" type="text/css" href="docstyle.css" />
</head>

<body>



<h1>singapore - Development</h1>

<p>The information in this file is for people who wish to contribute to 
<strong>singapore</strong>, modify it, understand how it works or make custom 
themes for it.</p>

<ul>
  <li><a href="#license">License information</a></li>
  <li><a href="#contents">Package content descriptions</a></li>
  <li><a href="#csvformat">CSV database format</a></li>
  <li><a href="#themeing">Creating custom themes</a></li>
  <li><a href="Readme.html">General Readme</a></li>
</ul>

<h2><a name="license">Licensing information</a></h2>

<pre>
 /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\
 *  <a href="http://singapore.sourceforge.net/">singapore</a> - Copyright 2003 Tamlyn Rhodes &lt;<a href="mailto:tam@zenology.org">tam@zenology.org</a>&gt;        *
 *                                                                     *
 *  singapore is free software; you can redistribute it and/or modify  *
 *  it under the terms of the <a href="License.txt">GNU General Public License</a> as published  *
 *  by the Free Software Foundation; either version 2 of the License,  *
 *  or (at your option) any later version.                             *
 *                                                                     *
 *  singapore is distributed in the hope that it will be useful,       *
 *  but WITHOUT ANY WARRANTY; without even the implied warranty        *
 *  of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.            *
 *  See the GNU General Public License for more details.               *
 *                                                                     *
 *  You should have received a copy of the GNU General Public License  *
 *  along with this; if not, write to the Free Software Foundation,    *
 *  Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA      *
 \* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */
</pre>


<h2><a name="contents">Package content descriptions</a></h2>

<pre>
  .                       top level - can be located anywhere on server
  admin.php               handles all admin operations
  convertdb.php           used to convert singapore databases between versions
  index.php               the main gallery script
  thumb.php               used to generate and serve on-the-fly image thumbnails
  cache/                  used to cache thumbnails - must be writeable by server
  galleries/              stores galleries, gallery info and images
                          each gallery is in it's own subdirectory
  images/                 images used by singapore
  includes/               PHP scripts
  includes/adminusers.csv CSV database of authorised admin users
  includes/adminutils.php admin functions
  includes/backend.php    includes appropriate backend file (fileio or mysqlio)
  includes/config.php     configuration information (user editable)
  includes/fileio.php     IO functions used in file IO mode
  includes/footer.php     default page footer
  includes/frontend.php   XHTML output functions
  includes/header.php     default page header
  includes/mysqlio.php    IO functions used in MySQL IO mode (not implemented)
  includes/utils.php      other functions
  logs/                   images access logs (buggy)
  themes/                 style sheets and images to customise appearance 
</pre>
  
<h2><a name="csvformat">CSV database format</a></h2>

<p>If you choose to use metadata files then each gallery must 
contain a CSV (comma separated values) file called metadata.csv
containing the information about images in the gallery and the gallery itself. 
CSV files can be edited manually (in a text editor such as Notepad) 
or using a spreadsheet application (such as MS Excel). Care must be taken when using 
Excel to save using commas as the separator character and not tabs or semi-colons.</p>

<p>The first line of each file stores human-readable descriptions of the fields 
and is ignored by <strong>singapore</strong>. The second line stores information 
about this gallery:</p>

<pre>
  field 0
     the filename of the image used to represent the gallery in the gallery list
  field 1
     (not used)
  field 2
     the owner of the gallery (not used)
  field 3
     space-separated list of usergroups (not used)
  field 4 
     gallery permission flags (not used)
  field 5
     space-separated list of categories the gallery belongs in (not used)
  field 6
     gallery name/title
  field 7
     artist name (optional)
  field 8
     artist email (optional)
  field 9
     copyright holder (optional)
  field 10
     short description of the gallery (optional)
  field 11 onwards
     (not used)
</pre>

<p>Each of the following lines (3 - ...) represents an image in the gallery. 
The format is as follows:</p>

<pre>
  field 0
     the filename of the image
  field 1
     the filename of the thumbnail image (not used)
  field 2
     the owner of the image (not used)
  field 3
     space-separated list of usergroups (not used)
  field 4 
     image permission flags (not used)
  field 5
     space-separated list of categories the image belongs in (not used)
  field 6
     image name/title
  field 7
     artist name (optional)
  field 8
     artist email (optional)
  field 9
     copyright holder (optional)
  field 10
     description of the image (optional)
  field 11
     location that the image was taken/made/represents (optional)
  field 12
     date taken/made (optional)
  field 13
     make and model of camera used (optional)
  field 14
     make and model of lens used (optional) 
  field 15
     make and type of film used (optional)
  field 16
     darkroom manipulation (optional)
  field 17
     digital manipulation (optional)
</pre>

<h2><a name="themeing">Creating custom themes</a></h2>

<p>Each theme resides in a separate sub-directory of <code>themes/</code>. The 
file <code>themes/<em>theme_name</em>/main.css</code> is the stylesheet 
containing CSS rules for all <em>named classes</em>, i.e. elements with either 
the <code>class</code> or <code>id</code> element set (or specific decendants of 
such elements). The file <code>themes/<em>theme_name</em>/extra.css</code> 
contains rules for <em>unnamed classes</em>. This means that in theory, one can
replace <code>extra.css</code> with the any other stylesheet (by setting the 
path in <code>includes/config.php</code>) and immediately give <strong>singapore</strong>
a similar look and feel to other pages using the same stylesheet.</p>

<p>The file <code>themes/<em>theme_name</em>/header.gif</code> is the image 
displayed at the top of every page. It may be any size but must be named as 
above.</p>

<p>For the moment just mess about with values in these stylesheets and see what 
you can do - better docs will follow later. If you come up with any nice themes 
zip them up and mail them to me so I can include them on the website. Also note that by editing 
<code>includes/header.php</code> and <code>includes/footer.php</code> (or using
your own) much greater creative control can be achieved. This, however, is 
considered skinning, not themeing, and is not officially supported in this 
version of <strong>singapore</strong>.</p>

<p><em>$Date: 2003/05/12 01:23:07 $</em></p>

</body>
</html>
